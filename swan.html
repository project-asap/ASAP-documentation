<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Analytics Programming Model - SWAN Compiler &#8212; Asap 0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="Asap 0.0 documentation" href="index.html" />
    <link rel="next" title="Telecommunication Analytics" href="telecom_analytics.html" />
    <link rel="prev" title="Extension of Apache Spark" href="spark.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="analytics-programming-model-swan-compiler">
<h1>Analytics Programming Model - SWAN Compiler<a class="headerlink" href="#analytics-programming-model-swan-compiler" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>ASAP aims to make it easy for users to describe and run data analytics queries by selecting the most suitable and efficient execution engines. There should be no restriction on the type of execution engine or on the format and medium used for input and output datasets. ASAP provides a workflow tool to facilitate the visual creation and adaptation of data analytics queries enabling analytics experts to create and change queries by dragging operator boxes and dataset flow arrows in a graphical interface into a suitable pictorial representation of a query workflow. Subsequent to query creation in the workflow tool, a multi-engine resource scheduling platform, IReS takes the workflow description of the analytics query and co-operates with a set of runtimes and data stores in order to effect the best implementation and execution of the query. A bridge is needed between the high level abstract description of a workflow query and the actual provisioning and execution of codes that can run the query.  This bridge is satisfied by the ASAP compiler. It maps the user’s high level workflow query,  as created within the workflow tool , to codes for the low-level programming language <strong>Swan</strong> using metadata which describes how Swan operators are materialized.  ASAP’s scheduler can subsequently use these codes to profile and select optimum runtime engines and data stores.</p>
</div>
<div class="section" id="design">
<h2>Design<a class="headerlink" href="#design" title="Permalink to this headline">¶</a></h2>
<p>The compiler reads and stores:</p>
<ol class="arabic simple">
<li>The metadata for materialized operators</li>
<li>The user’s work-flow description</li>
</ol>
<p>and generates Swan source code which can execute the user’s analytics query.</p>
<p>There are two phases:</p>
<p><strong>Phase 1</strong>: The compiler loads descriptions of operators and workflows from the metadata files into instances of descriptor classes which map operators from the user’s workflow to source code and subsequently executable code. Once this is loaded the compiler can infer rules around the use of individual operators.  For example, it will be able to build the function signature for calls to core functions such inputoutput and operator run statements.  It can work out what type definitions are required for different operators, what arguments are permitted to operators such as K-means and what the default values are if these are not supplied by the user.</p>
<p><strong>Phase 2</strong>: The compiler generates  the  code  by  loading  skeletal  source  code  from  template  files. These contain sections of Swan source code calling into a library with pre-defined functions. The skeletal code moreover contains placeholders requiring substitution with actual values and/or code sections. The compiler reads the templates and performs these substitions using operator rules to produce operator codes.</p>
</div>
<div class="section" id="algorithm">
<h2>Algorithm<a class="headerlink" href="#algorithm" title="Permalink to this headline">¶</a></h2>
<p>The compiler algorithm is driven by:</p>
<ol class="arabic simple">
<li>The flow of operators in the user’s workflow description.</li>
</ol>
<p>2.  The general sequencing and layout of a Swan/C++ program.
Initially the compiler parses metadata from the materialized operators library and creates a hierarchy of descriptor instances which represent operator and language construct rules.  These may be anything from operator objects to rules for declarations, typedefs and arguments associated with operators.</p>
<p>Code generation proceeds by:</p>
<p>Parsing and looping around the user’s workflow of operators.
(a)  Referencing the descriptor instances.
(b)  Referencing template code files and substituting placeholders.
(c)  Printing the code section.</p>
<p>Typically  declarations  for  input,  output  and  operator  arguments  are  generated  directly  and wholly from the materialized operator rules, replacing variable names with internally generated compiler ones and filenames with those supplied by the user.</p>
</div>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>The runtime should be obtained from <a class="reference external" href="https://github.com/project-asap/swan_runtime.git">https://github.com/project-asap/swan_runtime.git</a> and it is an extension of the Intel Cilk Plus Runtime.</p>
<p>The compiler should be obtained from <a class="reference external" href="https://github.com/project-asap/swan_clang.git">https://github.com/project-asap/swan_clang.git</a> and it is an extension of the Clang/LLVM compiler.</p>
<p>Note that the Clang/LLVM distribution has its own copy of the Intel Cilk Plus Runtime. We have however used the external code base as it is more recent.</p>
<p>The code for the Swan tests should be obtained from: <a class="reference external" href="https://github.com/project-asap/swan_tests.git">https://github.com/project-asap/swan_tests.git</a></p>
</div>
<div class="section" id="install">
<h2>Install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h2>
<p>For demostration reasons a Linux operating system like Ubuntu it is assumed in this step. In Windows or other Linux distributions the equivalents should be done.</p>
<div class="section" id="install-the-compiler">
<h3>Install the compiler<a class="headerlink" href="#install-the-compiler" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Checkout swan_llvm: git clone <a class="reference external" href="https://github.com/project-asap/swan_llvm.git">https://github.com/project-asap/swan_llvm.git</a></p>
</li>
<li><p class="first">Move to clang: cd swan_llvm/tools</p>
</li>
<li><p class="first">Checkout swan_clang: git clone <a class="reference external" href="https://github.com/project-asap/swan_clang.git">https://github.com/project-asap/swan_clang.git</a></p>
</li>
<li><p class="first">Move to compiler-rt directory: cd ../projects/compiler-rt</p>
</li>
<li><dl class="first docutils">
<dt>Create and move to build directory: mkdir build</dt>
<dd><p class="first last">cd build</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Build LLVM: cmake -G &#8220;Unix Makefiles&#8221; ../llvm</dt>
<dd><p class="first last">make clean
make</p>
</dd>
</dl>
</li>
</ol>
</div>
<div class="section" id="install-the-runtime">
<h3>Install the runtime<a class="headerlink" href="#install-the-runtime" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Checkout swan_runtime: git clone <a class="reference external" href="https://github.com/project-asap/swan_runtime.git">https://github.com/project-asap/swan_runtime.git</a></p>
</li>
<li><p class="first">Move to swan_runtime directory: cd swan_runtime</p>
</li>
<li><dl class="first docutils">
<dt>Build the Swan runtime: libtoolize</dt>
<dd><p class="first last">aclocal
automake &#8211;add-missing
autoconf
./configure &#8211;prefix=&lt;swan_runtime&gt;/swan_runtime/lib CC=../build/bin/clang CXX=../build/bin/clang++
make clean
make</p>
</dd>
</dl>
</li>
</ol>
</div>
</div>
<div class="section" id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h2>
<p>Test clang:</p>
<ol class="arabic">
<li><p class="first">Move to swan directory: cd swan</p>
</li>
<li><dl class="first docutils">
<dt>Execute: clang &#8211;help</dt>
<dd><p class="first last">clang++ &#8211;help
clang llvm/utils/count/count.c -fsyntax-only
clang llvm/utils/count/count.c -S -emit-llvm -o -
clang llvm/utils/count/count.c -S -emit-llvm -o - -O3
clang llvm/utils/count/count.c -S -O3 -o -</p>
</dd>
</dl>
</li>
</ol>
<p>Test swan:</p>
<ol class="arabic simple">
<li>Checkout swan_tests: git clone <a class="reference external" href="https://github.com/project-asap/swan_tests.git">https://github.com/project-asap/swan_tests.git</a></li>
<li>Move to swan_tests directory: cd swan_tests</li>
<li>Execute: make CXX=../build/bin/clang++ SWANRTDIR=../swan_runtime test</li>
</ol>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Analytics Programming Model - SWAN Compiler</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#design">Design</a></li>
<li><a class="reference internal" href="#algorithm">Algorithm</a></li>
<li><a class="reference internal" href="#setup">Setup</a></li>
<li><a class="reference internal" href="#install">Install</a><ul>
<li><a class="reference internal" href="#install-the-compiler">Install the compiler</a></li>
<li><a class="reference internal" href="#install-the-runtime">Install the runtime</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tests">Tests</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="spark.html" title="previous chapter">Extension of Apache Spark</a></li>
      <li>Next: <a href="telecom_analytics.html" title="next chapter">Telecommunication Analytics</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/swan.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Asap consortium.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5a1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="_sources/swan.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>