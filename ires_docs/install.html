<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation &amp; Deployment &#8212; Asap 0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="Asap 0.0 documentation" href="../index.html" />
    <link rel="up" title="IReS" href="ires_index.html" />
    <link rel="next" title="Workflow and Operator Definition" href="implementation.html" />
    <link rel="prev" title="Architecture" href="arch.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="installation-deployment">
<h1>Installation &amp; Deployment<a class="headerlink" href="#installation-deployment" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installing-ires-platform">
<h2>Installing IReS-Platform<a class="headerlink" href="#installing-ires-platform" title="Permalink to this headline">¶</a></h2>
<div class="section" id="prerequisite">
<h3>Prerequisite<a class="headerlink" href="#prerequisite" title="Permalink to this headline">¶</a></h3>
<p>To build the project, version 3 of maven is required because the previous version has bugs
with jetty and jersey packages. In Ubuntu just execute</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo apt-get install maven
</pre></div>
</div>
<p>and confirm the maven version by running</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>mvn -v
</pre></div>
</div>
<p>For other systems, you can find relevant instructions on the Web.</p>
</div>
<div class="section" id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h3>
<p>Installation of IRes-Platform requires the following steps:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Clone the IReS-Platform code from the GitHub repository at <a class="reference external" href="https://github.com/project-asap/IReS-Platform">https://github.com/project-asap/IReS-Platform</a>.
You need to install <code class="docutils literal"><span class="pre">git</span></code> first (<a class="reference external" href="https://rogerdudler.github.io/git-guide/">find here a quick reference of how to use git,</a></li>
<li>Build IReS-Platform project using maven.</li>
<li>Update some configuration files and folders appropriately.</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="build">
<h3>Build<a class="headerlink" href="#build" title="Permalink to this headline">¶</a></h3>
<p>A Linux operating system like Ubuntu it is assumed in this step. In Windows or other Linux distributions the equivalents should be done.</p>
<p>In the following, <code class="docutils literal"><span class="pre">IRES_HOME</span></code> refers to the directory where the IReS code has been cloned, e.g., it can
typically be <code class="docutils literal"><span class="pre">/home/$USER/asap/IReS-Platform</span></code>. Please define this  variable in your <code class="docutils literal"><span class="pre">bash</span></code> environment.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">IRES_HOME</span> <span class="o">=</span> &lt;path-to-ires&gt;
</pre></div>
</div>
<p>Some POM files has to be updated to refer to the currently installed YARN version. Navigate to $IRES_HOME folder and then</p>
<blockquote>
<div><ul>
<li><p class="first">edit the  <code class="docutils literal"><span class="pre">$IRES_HOME/asap-platform/pom.xml</span></code> file. Find the line about <code class="docutils literal"><span class="pre">hadoop.version</span></code>
and report the version number of the currently installed YARN version/ For instance,
if the Hadoop version is  2.7.3, the POM file should contain.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;hadoop.version&gt;</span>2.7.3<span class="nt">&lt;/hadoop.version&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">edit the  <code class="docutils literal"><span class="pre">$IRES_HOME/cloudera-kitten/pom.xml</span></code> file and do the same change.</p>
</li>
</ul>
</div></blockquote>
<p>Then, navigate to the folder <code class="docutils literal"><span class="pre">$IRES_HOME/panic</span></code> and build this sub-project by runninng</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo mvn clean install -DskipTests
</pre></div>
</div>
<p>Do the same for the <code class="docutils literal"><span class="pre">$IRES_HOME/cloudera-kitten</span></code> folder and
ignore the message &#8220;BUILD FAILURE&#8221; for the moment if that message occurs.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">cd</span> ../cloudera-kitten <span class="p">;</span>  sudo mvn clean install -DskipTests
</pre></div>
</div>
<p>Next, build similarly the <code class="docutils literal"><span class="pre">$IRES_HOME/asap-platform</span></code> folder and ingore again a
possible &#8220;BUILD FAILURE&#8221; message.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">cd</span> ../asap-platform <span class="p">;</span>  sudo mvn clean install -DskipTests
</pre></div>
</div>
<p>Repeat the process for the last two folders with the same order,
i.e. first build <code class="docutils literal"><span class="pre">$IRES_HOME/cloudera-kitten</span></code> and afterwards build <code class="docutils literal"><span class="pre">$IRES_HOME/asap-platform</span></code>.
At the end, you should see a &#8220;BUILD SUCCESS&#8221; message. The building order of the directories above should be followed.</p>
<p>Apart from the &#8220;BUILD SUCCESS&#8221; message, you should also see a newly created
folder by the name <code class="docutils literal"><span class="pre">target</span></code> for each of the directories above i.e.
<code class="docutils literal"><span class="pre">panic</span></code>, <code class="docutils literal"><span class="pre">cloudera-kitten</span></code>, and <code class="docutils literal"><span class="pre">asap-platform</span></code> if it did not already exist.</p>
</div>
<div class="section" id="update">
<h3>Update<a class="headerlink" href="#update" title="Permalink to this headline">¶</a></h3>
<p>To run asap-server successfully and correctly, two things must be done. The first thing is to define the home folder of the ASAP server. The second one is to copy the cluster configuration files to the corresponding folder of the ASAP server.</p>
<p>As for the ASAP server&#8217;s home folder, the corresponding file</p>
<p>$IRES_HOME/asap-platform/asap-server/src/main/scripts/asap-server</p>
<p>should be updated. In this file the variable &#8220;ASAP_SERVER_HOME&#8221; should be assigned the path of the folder &#8220;asap-platform/asap-server/target&#8221; and thus under the line</p>
<p>#IRES_HOME=/path/to/IReS-Platform_project</p>
<p>set the IRES_HOME=</p>
<p>to your custom IRES_HOME e.g.</p>
<p>IRES_HOME=/home/$USER/asap/IReS-Platform</p>
<p>Notice that the folder &#8220;$IRES_HOME/asap-platform/asap-server/target&#8221; has been created during the building phase.</p>
<p>&#8211;&gt; As for the cluster configuration files, it is assumed that a YARN( or Hadoop 2.0) cluster is already set up and that YARN can be found for example in</p>
<p>YARN=/home/$USER/yarn</p>
<p>Copy the $YARN/etc/hadoop/core-site.xml and $YARN/etc/hadoop/yarn-site.xml files into the $IRES_HOME/asap-platform/asap-server/target/conf directory. Finally, the yarn-site.xml must have a minimum set of properties in order for the IReS-Platform to work correctly. This minimum set of properties can be found in resources/conf/yarn-site-min.xml file of this repository. Similarly for the core-site.xml file there is a core-site-min.xml into the same folder.</p>
</div>
</div>
<div class="section" id="running-the-helloworld-workflow">
<h2>Running the HelloWorld workflow<a class="headerlink" href="#running-the-helloworld-workflow" title="Permalink to this headline">¶</a></h2>
<p>The HelloWorld is a simple workflow constists of just a single operator, designed for demonstration purposes. To run the HelloWolrd follow the next steps:</p>
<ol class="arabic simple">
<li>Go to IReS UI: <a class="reference external" href="http://localhost:1323/web/main">http://localhost:1323/web/main</a></li>
</ol>
<div class="figure" id="id1">
<img alt="../_images/ireshome.png" src="../_images/ireshome.png" />
<p class="caption"><span class="caption-text">IReS Home Page</span></p>
</div>
<ol class="arabic simple" start="2">
<li>Go to the <strong>Abstract Workflows</strong> tab and select the <strong>HelloWorld</strong> workflow</li>
</ol>
<div class="figure" id="id2">
<img alt="../_images/abstractworkflows.png" src="../_images/abstractworkflows.png" />
<p class="caption"><span class="caption-text">Abstract Workflows Tab</span></p>
</div>
<ol class="arabic simple" start="3">
<li>Then click on <strong>Materialize Workflow</strong> button</li>
</ol>
<div class="figure" id="id3">
<img alt="../_images/abstracthello.png" src="../_images/abstracthello.png" />
<p class="caption"><span class="caption-text">Abstract HelloWorld Workflow</span></p>
</div>
<ol class="arabic simple" start="4">
<li>Click on the <strong>Execute Workflow</strong> button to start the execution</li>
</ol>
<div class="figure" id="id4">
<img alt="../_images/materializedhello.png" src="../_images/materializedhello.png" />
<p class="caption"><span class="caption-text">The materialized HelloWorld workflow</span></p>
</div>
<p>In the figures below we can see the execution process</p>
<div class="figure" id="id5">
<a class="reference internal image-reference" href="../_images/exec1.png"><img alt="../_images/exec1.png" src="../_images/exec1.png" style="width: 150%;" /></a>
<p class="caption"><span class="caption-text">The execution has been started</span></p>
</div>
<div class="figure" id="id6">
<a class="reference internal image-reference" href="../_images/yarn.png"><img alt="../_images/yarn.png" src="../_images/yarn.png" style="width: 150%;" /></a>
<p class="caption"><span class="caption-text">The submitted YARN application</span></p>
</div>
<div class="figure" id="id7">
<a class="reference internal image-reference" href="../_images/exec2.png"><img alt="../_images/exec2.png" src="../_images/exec2.png" style="width: 150%;" /></a>
<p class="caption"><span class="caption-text">The execution has been finished</span></p>
</div>
</div>
<div class="section" id="create-a-new-workflow-from-scratch">
<h2>Create a new workflow from scratch<a class="headerlink" href="#create-a-new-workflow-from-scratch" title="Permalink to this headline">¶</a></h2>
<p>In this section we describe the process of design a new workflow from scratch.</p>
<div class="section" id="creating-abstract-operators">
<h3>1. Creating Abstract Operators<a class="headerlink" href="#creating-abstract-operators" title="Permalink to this headline">¶</a></h3>
<p>In order to create a new workflow the definition of the abstract operators is needed. To define the <strong>HelloWorld</strong> abstract operator go to the <strong>Abstract Operators</strong> tab and enter the operator description in the text box. To create and save the new abstract operator click the &#8220;Add operator&#8221; button.</p>
<a class="reference internal image-reference" href="../_images/newabstractoperator.png"><img alt="../_images/newabstractoperator.png" src="../_images/newabstractoperator.png" style="width: 150%;" /></a>
</div>
<div class="section" id="creating-materialized-operators">
<h3>2. Creating Materialized Operators<a class="headerlink" href="#creating-materialized-operators" title="Permalink to this headline">¶</a></h3>
<p>Currently, to add a materialized operator a folder with the least required files is needed.</p>
<ol class="lowerroman simple">
<li>From the bash shell, go to the <strong>asapLibrary/operators</strong> folder in the IReS installation directory.</li>
</ol>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span>cd $ASAP_HOME/target/asapLibrary/operators
</pre></div>
</div>
<ol class="lowerroman simple" start="2">
<li>Then, create a new folder named with the new materialized operator&#8217;s name.</li>
</ol>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">HelloWorld</span>
</pre></div>
</div>
<ol class="lowerroman simple" start="3">
<li>Create the <strong>description</strong> file and enter the information below</li>
</ol>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span>$ nano description
</pre></div>
</div>
<div class="code javascript highlight-default"><div class="highlight"><pre><span></span>Constraints.Engine=Spark
Constraints.Output.number=1
Constraints.Input.number=1
Constraints.OpSpecification.Algorithm.name=HelloWorld
Optimization.model.execTime=gr.ntua.ece.cslab.panic.core.models.UserFunction
Optimization.model.cost=gr.ntua.ece.cslab.panic.core.models.UserFunction
Optimization.outputSpace.execTime=Double
Optimization.outputSpace.cost=Double
Optimization.cost=1.0
Optimization.execTime=1.0
Execution.Arguments.number=1
Execution.Argument0=testout
Execution.Output0.name=$HDFS_OP_DIR/testout
Execution.copyFromLocal=testout
</pre></div>
</div>
<ol class="lowerroman simple" start="4">
<li>Create the .lua file with the execution instructions</li>
</ol>
<div class="code javascript highlight-default"><div class="highlight"><pre><span></span><span class="n">operator</span> <span class="o">=</span> <span class="n">yarn</span> <span class="p">{</span>
  <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Execute Hello world&quot;</span><span class="p">,</span>
  <span class="n">timeout</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span>
  <span class="n">memory</span> <span class="o">=</span> <span class="mi">1024</span><span class="p">,</span>
  <span class="n">cores</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">container</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">instances</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="o">--</span><span class="n">env</span> <span class="o">=</span> <span class="n">base_env</span><span class="p">,</span>
    <span class="n">resources</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">[</span><span class="s2">&quot;HelloWorld.sh&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
       <span class="n">file</span> <span class="o">=</span> <span class="s2">&quot;asapLibrary/operators/HelloWorld/HelloWorld.sh&quot;</span><span class="p">,</span>
                <span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>               <span class="o">--</span> <span class="n">other</span> <span class="n">value</span><span class="p">:</span> <span class="s1">&#39;archive&#39;</span>
                <span class="n">visibility</span> <span class="o">=</span> <span class="s2">&quot;application&quot;</span>  <span class="o">--</span> <span class="n">other</span> <span class="n">values</span><span class="p">:</span> <span class="s1">&#39;private&#39;</span><span class="p">,</span> <span class="s1">&#39;public&#39;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="n">command</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">base</span> <span class="o">=</span> <span class="s2">&quot;./HelloWorld.sh&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="loweralpha simple" start="22">
<li>Create the executable</li>
</ol>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span>$ nano HelloWorld.sh
</pre></div>
</div>
<div class="code javascript highlight-default"><div class="highlight"><pre><span></span>#!/bin/bash
echo &quot;Hello world&quot; &gt;&gt; $1
</pre></div>
</div>
<ol class="lowerroman simple" start="6">
<li>Restart the IReS server</li>
</ol>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span>$ $IRES_HOME/asap-server/src/main/scripts/asap-server restart
</pre></div>
</div>
</div>
<div class="section" id="creating-the-abstract-workflow">
<h3>3. Creating the Abstract Workflow<a class="headerlink" href="#creating-the-abstract-workflow" title="Permalink to this headline">¶</a></h3>
<p>Now we will combine everything we created in the above steps to generate the new workflow. Go to the <strong>Abstract Workflows</strong> tab and click the &#8220;New Workflow&#8221; button.</p>
<a class="reference internal image-reference" href="../_images/newworkflow1.png"><img alt="../_images/newworkflow1.png" src="../_images/newworkflow1.png" style="width: 150%;" /></a>
<p>Then we add the workflow parts one-by-one. First we add the <strong>crawlDocuments</strong> dataset from the dataset library. Select the <strong>Materialized Dataset</strong> radio button and enter the dataset name in the <strong>Comma seperated list</strong> text box. Then click the <strong>Add nodes</strong> button to add the dataset node to the workflow graph. Repeat this step to add an output node with name <strong>d1</strong>. Just enter the name <strong>d1</strong> to the text box and click the <strong>Add nodes</strong> button.</p>
<a class="reference internal image-reference" href="../_images/newworkflow2.png"><img alt="../_images/newworkflow2.png" src="../_images/newworkflow2.png" style="width: 150%;" /></a>
<a class="reference internal image-reference" href="../_images/newworkflow3.png"><img alt="../_images/newworkflow3.png" src="../_images/newworkflow3.png" style="width: 150%;" /></a>
<p>Add the <strong>HelloWorld</strong> abstract operator to the workflow. Select the <strong>Abstract Operator</strong> radio button, enter the operator&#8217;s name (HelloWold) in the text box and click again the <strong>Add nodes</strong> button.</p>
<a class="reference internal image-reference" href="../_images/newworkflow4.png"><img alt="../_images/newworkflow4.png" src="../_images/newworkflow4.png" style="width: 150%;" /></a>
<p>Describe the workflow by connecting the graph nodes defined in the previous steps as shown in the figure bellow and click the <strong>Change graph</strong> button.</p>
<a class="reference internal image-reference" href="../_images/newworkflow5.png"><img alt="../_images/newworkflow5.png" src="../_images/newworkflow5.png" style="width: 150%;" /></a>
<p>In the figure bellow we can see the generated <strong>Abstract Workflow</strong>. Now click the <strong>Materialize workflow</strong></p>
<a class="reference internal image-reference" href="../_images/newworkflow6.png"><img alt="../_images/newworkflow6.png" src="../_images/newworkflow6.png" style="width: 150%;" /></a>
<p>The resulting materialized workflow</p>
<div class="figure">
<img alt="../_images/materializedhello.png" src="../_images/materializedhello.png" />
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation &amp; Deployment</a><ul>
<li><a class="reference internal" href="#installing-ires-platform">Installing IReS-Platform</a><ul>
<li><a class="reference internal" href="#prerequisite">Prerequisite</a></li>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#build">Build</a></li>
<li><a class="reference internal" href="#update">Update</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running-the-helloworld-workflow">Running the HelloWorld workflow</a></li>
<li><a class="reference internal" href="#create-a-new-workflow-from-scratch">Create a new workflow from scratch</a><ul>
<li><a class="reference internal" href="#creating-abstract-operators">1. Creating Abstract Operators</a></li>
<li><a class="reference internal" href="#creating-materialized-operators">2. Creating Materialized Operators</a></li>
<li><a class="reference internal" href="#creating-the-abstract-workflow">3. Creating the Abstract Workflow</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="ires_index.html">IReS</a><ul>
      <li>Previous: <a href="arch.html" title="previous chapter">Architecture</a></li>
      <li>Next: <a href="implementation.html" title="next chapter">Workflow and Operator Definition</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/ires_docs/install.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Asap consortium.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5a1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="../_sources/ires_docs/install.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>